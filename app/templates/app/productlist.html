{% extends 'app/base.html' %}
{% load static %}
{% block title %}{{ category.name }}{% endblock %}
{% block main-content %}
<div class="container my-5">
  <div class="row">

    <!-- Sidebar -->
    <div class="col-sm-3">
      <div class="list-group mb-3">
        <a href="{% url 'product-list' category.slug %}" class="list-group-item list-group-item-action active">
          All {{ category.name }}
        </a>
        {% for brand in brands %}
          <a href="{% url 'product-list-brand' category.slug brand.slug %}" class="list-group-item list-group-item-action">
            {{ brand.name }}
          </a>
        {% endfor %}
      </div>

      <div class="list-group">
        <h6 class="text-center mb-2 fw-bold">Price Filter</h6>
        <a href="{% url 'product-list-price' category.slug 0 10000 %}" class="list-group-item">Below ₹10,000</a>
        <a href="{% url 'product-list-price' category.slug 10000 20000 %}" class="list-group-item">₹10,000 - ₹20,000</a>
        <a href="{% url 'product-list-price' category.slug 20000 30000 %}" class="list-group-item">₹20,000 - ₹30,000</a>
        <a href="{% url 'product-list-price' category.slug 30000 50000 %}" class="list-group-item">₹30,000 - ₹50,000</a>
        <a href="{% url 'product-list-price' category.slug 50000 1000000 %}" class="list-group-item">Above ₹50,000</a>
      </div>
    </div>

    <!-- Product Grid -->
    <div class="col-sm-8 offset-sm-1">
      <div class="row">
        {% for product in products %}
        <div class="col-sm-4 text-center mb-4">
          <a href="{% url 'product-detail' product.id %}" class="btn">
            <div class="item">
              <img src="{{ product.product_img.url }}" alt="" height="200px">
              <span class="fw-bold">{{ product.title }}</span><br>
              <span class="fs-5">₹{{ product.discounted_price }}</span>
              <small class="fw-light text-decoration-line-through">{{ product.selling_price }}</small>
            </div>
          </a>
        </div>
        {% empty %}
        <p class="text-center text-muted">No products found.</p>
        {% endfor %}
      </div>
    </div>

  </div>
</div>
{% endblock %}
